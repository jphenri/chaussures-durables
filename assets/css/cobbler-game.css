@import url("https://fonts.googleapis.com/css2?family=Bree+Serif&family=DM+Sans:wght@400;500;700;800&display=swap");

.cobbler-game {
  display: grid;
  gap: 1rem;
}

.cobbler-game [hidden] {
  display: none !important;
}

.cg-topbar {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  grid-template-areas:
    "lang"
    "stats";
  align-items: start;
  column-gap: 0.7rem;
  row-gap: 0.55rem;
  padding: 0.85rem 1rem;
  border: 1px solid #d9b8aa;
  border-radius: 14px;
  background: linear-gradient(130deg, #fff4ed, #ffece3);
  position: sticky;
  top: 0.5rem;
  z-index: 25;
}

.cg-intro {
  grid-area: intro;
  margin: 0;
  color: #5a433b;
  line-height: 1.35;
  max-width: none;
  min-width: 0;
}

.cg-topbar-actions {
  grid-area: lang;
  justify-self: stretch;
  align-self: start;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 0.45rem;
}

.cg-lang-toggle {
  color: #7a1d18;
  border-color: rgba(122, 29, 24, 0.45);
  background: rgba(255, 250, 246, 0.9);
  min-width: 68px;
}

.cg-exit-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 128px;
  text-decoration: none;
  white-space: nowrap;
}

.cg-topbar .cg-stats {
  grid-area: stats;
  width: 100%;
  margin-top: 0.05rem;
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(164px, 1fr);
  align-items: stretch;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
  padding-bottom: 0.2rem;
  gap: 0.42rem;
}

.cg-topbar .cg-stats p {
  min-height: 44px;
}

.cg-topbar .cg-stars {
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 0 0 150px;
  border: 1px solid #e7c8ac;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.66);
  padding: 0.4rem 0.52rem;
  min-height: 44px;
}

.cg-topbar-order {
  width: 100%;
  border: 1px solid #d8b49b;
  border-radius: 12px;
  background: rgba(255, 251, 247, 0.9);
  padding: 0.62rem 0.72rem;
  margin-top: -0.35rem;
}

.cg-topbar-order-grid {
  display: grid;
  gap: 0.28rem;
}

.cg-topbar-order-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.34rem;
  margin-bottom: 0.24rem;
}

.cg-order-meta {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 0.2rem;
}

.cg-order-meta-item {
  display: grid;
  gap: 0.08rem;
  margin: 0;
  border: 1px solid #e6cab7;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.72);
  padding: 0.22rem 0.34rem;
}

.cg-order-meta-item span {
  font-size: 0.66rem;
  line-height: 1.1;
  color: #795443;
  letter-spacing: 0.02em;
  text-transform: uppercase;
}

.cg-order-meta-item strong {
  font-size: 0.82rem;
  line-height: 1.15;
  color: #4a2c22;
}

.cg-topbar-order h2,
.cg-topbar-order h3 {
  margin: 0 0 0.24rem;
  color: #5b3327;
}

.cg-topbar-order p {
  margin: 0 0 0.2rem;
  color: #5a433b;
}

.cg-topbar-order .cg-issues,
.cg-topbar-order .cg-steps {
  margin-top: 0.14rem;
  gap: 0.18rem;
}

.cg-topbar-order .cg-issues li,
.cg-topbar-order .cg-steps li {
  font-size: 0.82rem;
  line-height: 1.22;
}

.cg-topbar-order .cg-issue-solution {
  margin-top: 0.06rem;
  font-size: 0.76rem;
}

.cg-shelve-btn {
  min-height: 30px;
  padding: 0.18rem 0.42rem;
  font-size: 0.74rem;
  white-space: nowrap;
}

.cg-action-error {
  margin: -0.35rem 0 0;
  border: 1px solid #c45a48;
  border-radius: 12px;
  background: linear-gradient(180deg, #fff2ee, #ffe5de);
  box-shadow: 0 8px 18px rgba(120, 34, 26, 0.16);
  color: #7d1f18;
  font-weight: 700;
  line-height: 1.35;
  padding: 0.58rem 0.78rem;
  opacity: 0;
  transform: translateY(-4px);
  transition: opacity 0.16s ease, transform 0.16s ease;
}

.cg-action-error.is-visible {
  opacity: 1;
  transform: translateY(0);
}

.cg-layout {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

.cg-panel {
  border: 1px solid #d9b8aa;
  border-radius: 16px;
  background: #fffaf6;
  box-shadow: 0 10px 28px rgba(94, 26, 22, 0.1);
  padding: 1rem;
}

.cg-panel h2 {
  margin-bottom: 0.8rem;
  font-size: 1.2rem;
}

.cg-panel h3 {
  margin-top: 0.35rem;
  margin-bottom: 0.45rem;
  font-size: 1rem;
}

.cg-order p,
.cg-stats p {
  margin: 0 0 0.45rem;
}

.cg-order-cta {
  margin-bottom: 0.75rem;
}

.cg-order-cta .btn {
  width: 100%;
}

.cg-queue-builder {
  margin-bottom: 0.9rem;
  border: 1px solid #dfc2b0;
  border-radius: 12px;
  background: #fff6f0;
  padding: 0.58rem;
  display: grid;
  gap: 0.45rem;
}

.cg-queue-builder .btn {
  width: 100%;
}

.cg-queue-summary {
  margin: 0;
  font-size: 0.86rem;
  color: #6b4e43;
}

.cg-queue-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 0.35rem;
}

.cg-queue-list li {
  border: 1px solid #e1c0ad;
  border-radius: 10px;
  background: #fff9f5;
  padding: 0.36rem 0.48rem;
  color: #5d443a;
  font-size: 0.86rem;
}

.cg-queue-item {
  display: grid;
  gap: 0.4rem;
}

.cg-queue-item.is-selected {
  border-color: #7a1d18;
  background: #fff2ea;
}

.cg-queue-item-main {
  display: block;
  line-height: 1.35;
}

.cg-queue-actions {
  display: flex;
  gap: 0.4rem;
}

.cg-queue-actions .btn {
  flex: 1;
  min-width: 0;
  width: auto;
}

.cg-queue-selected {
  display: inline-flex;
  width: fit-content;
  padding: 0.12rem 0.4rem;
  border-radius: 999px;
  border: 1px solid rgba(122, 29, 24, 0.5);
  background: rgba(255, 229, 216, 0.9);
  color: #7a1d18;
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.03em;
  text-transform: uppercase;
}

.cg-issues {
  margin: 0;
  padding-left: 1.05rem;
  display: grid;
  gap: 0.45rem;
}

.cg-issue-item {
  color: #4f3f38;
}

.cg-issue-status {
  display: inline-block;
  margin-left: 0.35rem;
  font-size: 0.79rem;
  font-weight: 700;
  letter-spacing: 0.02em;
  text-transform: uppercase;
}

.cg-issue-status[data-status="pending"] {
  color: #7b5a4f;
}

.cg-issue-status[data-status="fixed"] {
  color: #146539;
}

.cg-issue-status[data-status="rough"] {
  color: #8d2620;
}

.cg-issue-solution {
  display: block;
  margin-top: 0.2rem;
  color: #6f564d;
  font-size: 0.9rem;
}

.cg-steps {
  margin: 0;
  padding-left: 1.05rem;
  display: grid;
  gap: 0.35rem;
}

.cg-steps li {
  color: #6c5349;
  font-size: 0.94rem;
}

.cg-steps li.is-active {
  color: #7a1d18;
  font-weight: 700;
}

.cg-steps li.is-done {
  color: #1c683e;
}

.cg-workshop {
  display: grid;
  gap: 0.7rem;
  align-content: start;
}

.cg-stage-name {
  display: inline-flex;
  align-items: center;
  width: fit-content;
  margin: 0;
  border: 1px solid rgba(122, 29, 24, 0.35);
  border-radius: 999px;
  padding: 0.2rem 0.62rem;
  color: #7a1d18;
  font-weight: 700;
  font-size: 0.86rem;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  background: rgba(255, 233, 224, 0.9);
}

.cg-stage-desc {
  margin: 0;
  color: #5a433b;
}

.cg-shoe-scene {
  width: min(360px, 100%);
  margin: 0.35rem auto 0.2rem;
  border: 1px solid #dfc0b3;
  border-radius: 12px;
  background: #fff5ef;
  overflow: hidden;
}

.cg-shoe-scene img {
  display: block;
  width: 100%;
  height: auto;
}

.cg-mini-wrap {
  display: grid;
  gap: 0.65rem;
  order: 20;
}

.cg-shoe-scene {
  order: 30;
}

.cg-workshop > .cg-mini-wrap {
  order: 20 !important;
}

.cg-workshop > .cg-shoe-scene {
  order: 30 !important;
}

.cobbler-game[data-stage="repair"] .cg-workshop > .cg-mini-wrap {
  order: 18 !important;
}

.cobbler-game[data-stage="repair"] .cg-workshop > .cg-repair-plan {
  order: 22 !important;
}

.cg-mini {
  border: 1px solid #e5c6b8;
  border-radius: 14px;
  background: #fff2ea;
  padding: 0.78rem;
  scroll-margin-top: 1rem;
}

.cg-mini h3 {
  margin-top: 0;
}

.cg-mini p {
  margin-top: 0;
  margin-bottom: 0.55rem;
  color: #5d4841;
}

.cg-diagnosis-list {
  display: grid;
  gap: 0.55rem;
}

.cg-diagnosis-card {
  border: 1px solid #d7b5a6;
  border-radius: 12px;
  background: #fff8f4;
  padding: 0.62rem 0.68rem;
}

.cg-diagnosis-card h4 {
  margin: 0 0 0.35rem;
  font-family: "Oswald", "Arial Narrow", sans-serif;
  letter-spacing: 0.02em;
  font-size: 0.98rem;
}

.cg-diagnosis-break {
  margin: 0 0 0.45rem;
  color: #624d44;
  font-size: 0.92rem;
}

.cg-diagnosis-label {
  display: inline-block;
  margin-bottom: 0.24rem;
  font-family: "Oswald", "Arial Narrow", sans-serif;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  font-size: 0.78rem;
  color: #744f45;
}

.cg-diagnosis-select,
.cg-repair-plan select,
.cg-queue-builder select {
  width: 100%;
  border: 1px solid #c99c8c;
  border-radius: 10px;
  padding: 0.5rem 0.56rem;
  background: #fffcfa;
  color: #332824;
  font: inherit;
}

.cg-diagnosis-choice {
  margin-top: 0.38rem;
  margin-bottom: 0;
  color: #6b5148;
  font-size: 0.88rem;
}

.cg-repair-line {
  margin-bottom: 0.42rem;
}

.cg-field-label {
  display: inline-block;
  margin-bottom: 0.25rem;
  margin-top: 0.35rem;
  font-family: "Oswald", "Arial Narrow", sans-serif;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  font-size: 0.82rem;
  color: #744f45;
}

.cg-repair-hint {
  margin-top: 0.55rem;
  margin-bottom: 0;
  color: #675046;
  font-size: 0.88rem;
}

.cg-repair-feedback {
  margin-top: 0.38rem;
  margin-bottom: 0.3rem;
  border: 1px solid #d9beb3;
  border-radius: 10px;
  padding: 0.45rem 0.52rem;
  font-size: 0.84rem;
  background: #fff7f2;
  color: #5e4a42;
}

.cg-repair-feedback.is-good {
  border-color: #74b286;
  background: #eff9f2;
  color: #1f6338;
}

.cg-repair-feedback.is-ok {
  border-color: #d2aa53;
  background: #fff8e8;
  color: #7a5a1a;
}

.cg-repair-feedback.is-bad {
  border-color: #d37a73;
  background: #fff0ee;
  color: #872821;
}

.cg-repair-feedback.is-empty {
  border-style: dashed;
  color: #7a6359;
}

.cg-track {
  position: relative;
  height: 22px;
  border-radius: 999px;
  border: 1px solid #c69784;
  background: linear-gradient(180deg, #fff7f1, #ffe9de);
  overflow: hidden;
  margin-bottom: 0.6rem;
}

.cg-zone {
  position: absolute;
  top: 0;
  height: 100%;
  background: linear-gradient(180deg, #8fd68c, #58af57);
}

.cg-cursor {
  position: absolute;
  top: -5px;
  width: 14px;
  height: 32px;
  border-radius: 8px;
  background: #7a1d18;
  transform: translateX(-50%);
  box-shadow: 0 3px 10px rgba(122, 29, 24, 0.35);
}

.cg-fill-track {
  position: relative;
  height: 20px;
  border-radius: 999px;
  border: 1px solid #c69784;
  background: #fff8f3;
  overflow: hidden;
  margin-bottom: 0.45rem;
}

.cg-fill {
  width: 0;
  height: 100%;
  background: linear-gradient(90deg, #e25745, #ab2a22);
  transition: width 0.09s linear;
}

.cg-mini-counter {
  font-family: "Oswald", "Arial Narrow", sans-serif;
  letter-spacing: 0.03em;
  font-size: 0.92rem;
}

.cg-mini-action {
  min-width: 170px;
  color: #7a1d18;
  border-color: rgba(122, 29, 24, 0.45);
  background: rgba(255, 250, 246, 0.9);
}

.cg-tools-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.55rem;
  margin-bottom: 0.8rem;
}

.cg-tool-btn {
  justify-content: flex-start;
  border: 1px solid rgba(122, 29, 24, 0.45);
  color: #7a1d18;
  background: rgba(255, 247, 241, 0.9);
  min-height: 44px;
}

.cg-tool-btn[disabled],
.cg-mini-action[disabled] {
  opacity: 0.46;
  cursor: not-allowed;
}

.cg-stats {
  border: 1px solid #e5c6b8;
  border-radius: 12px;
  background: #fff3ec;
  padding: 0.68rem;
}

.cg-stars {
  margin-top: 0.35rem;
  margin-bottom: 0;
  color: #b17600;
  letter-spacing: 0.08em;
  font-size: 1.12rem;
}

.cg-inventory {
  margin-top: 0.7rem;
  border: 1px solid #e1c0af;
  border-radius: 12px;
  background: #fff7f1;
  padding: 0.58rem;
}

.cg-inventory h3 {
  margin-top: 0;
  margin-bottom: 0.4rem;
}

.cg-inventory-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 0.24rem;
  max-height: 210px;
  overflow: auto;
}

.cg-inventory-list li {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 0.5rem;
  border: 1px solid #ecd0c3;
  border-radius: 8px;
  background: #fffdfb;
  padding: 0.25rem 0.45rem;
  color: #58423a;
  font-size: 0.82rem;
}

.cg-inventory-name {
  flex: 1;
}

.cg-inventory-qty {
  color: #6e2b16;
}

.cg-inventory-list li.is-low .cg-inventory-qty {
  color: #9b1e19;
}

.cg-actions {
  margin-top: 0.8rem;
  display: grid;
  gap: 0.5rem;
}

.cg-actions .btn {
  width: 100%;
}

.cg-shortcuts {
  margin-top: 0.65rem;
  margin-bottom: 0;
  font-size: 0.86rem;
  color: #6d554c;
}

.cg-log [data-log-list] {
  margin: 0;
  padding-left: 1.1rem;
  display: grid;
  gap: 0.34rem;
  max-height: 220px;
  overflow: auto;
}

.cg-log [data-log-list] li {
  color: #5a453d;
  font-size: 0.92rem;
}

.cg-gallery-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.7rem;
}

.cg-gallery figure {
  margin: 0;
  border: 1px solid #dfc0b3;
  border-radius: 12px;
  background: #fff5ef;
  padding: 0.5rem;
}

.cg-gallery img {
  width: 100%;
  border-radius: 8px;
}

.cg-gallery figcaption {
  margin-top: 0.5rem;
  font-size: 0.9rem;
  color: #5a463f;
}

.cg-gallery-note {
  margin-top: 0.6rem;
  margin-bottom: 0;
  font-size: 0.88rem;
  color: #6d554c;
}

.cg-popup-overlay {
  position: fixed;
  inset: 0;
  z-index: 1100;
  display: grid;
  place-items: center;
  padding: 1rem;
  background: rgba(26, 13, 10, 0.6);
}

.cg-popup {
  width: min(460px, 100%);
  border: 1px solid #d9b8aa;
  border-radius: 16px;
  background: #fffaf6;
  box-shadow: 0 18px 40px rgba(24, 8, 6, 0.34);
  padding: 1rem;
}

.cg-popup h2 {
  margin-top: 0;
  margin-bottom: 0.55rem;
  color: #65231d;
}

.cg-popup p {
  margin-top: 0;
  margin-bottom: 0.9rem;
  color: #5a433b;
}

.cg-popup .btn {
  width: 100%;
}

.cg-week-popup {
  width: min(660px, 100%);
}

.cg-week-summary {
  margin-bottom: 0.75rem;
  color: #4e3a33;
}

.cg-week-metrics {
  display: grid;
  gap: 0.35rem 0.75rem;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  margin-bottom: 0.85rem;
}

.cg-week-metrics p {
  margin: 0;
  font-size: 0.92rem;
}

.cg-week-upgrades {
  list-style: none;
  margin: 0 0 0.85rem;
  padding: 0;
  display: grid;
  gap: 0.55rem;
}

.cg-week-upgrade {
  border: 1px solid #ddb9aa;
  border-radius: 11px;
  background: #fff3ea;
  padding: 0.62rem;
}

.cg-week-upgrade h4 {
  margin: 0 0 0.2rem;
  color: #60261f;
  font-size: 0.96rem;
}

.cg-week-upgrade p {
  margin: 0 0 0.28rem;
  font-size: 0.86rem;
  color: #5e4a42;
}

.cg-upgrade-meta {
  color: #76584e;
}

.cg-upgrade-row {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  gap: 0.45rem;
  margin-top: 0.35rem;
}

.cg-upgrade-status {
  font-size: 0.82rem;
  color: #5b473f;
}

.cg-upgrade-status.is-owned {
  color: #21673d;
}

.cg-upgrade-status.is-blocked {
  color: #8a2f28;
}

.cg-upgrade-buy {
  min-width: 120px;
}

.cg-supply-popup {
  width: min(620px, 100%);
}

.cg-supply-list {
  margin-bottom: 0.9rem;
}

.cg-week-empty {
  margin: 0;
  border: 1px dashed #d7b6a8;
  border-radius: 11px;
  background: #fff8f4;
  color: #674f46;
  padding: 0.65rem;
  font-size: 0.9rem;
}

@media (min-width: 740px) {
  .cg-diagnosis-list {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .cg-gallery-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .cg-tools-grid {
    grid-template-columns: 1fr;
  }

  .cg-actions {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 560px) {
  .cg-week-metrics {
    grid-template-columns: 1fr;
  }
}

@media (min-width: 1020px) {
  .cg-layout {
    grid-template-columns: 0.95fr 1.35fr 1fr;
  }

  .cg-tools-grid {
    grid-template-columns: 1fr;
  }

  .cg-actions {
    grid-template-columns: 1fr;
  }
}

/* Design refresh: warm atelier direction */
.cobbler-game {
  --cg-wood-1: #fbf1e6;
  --cg-wood-2: #f3dfcb;
  --cg-wood-3: #e4c4a7;
  --cg-ink: #2d221d;
  --cg-accent: #8b2c1f;
  --cg-accent-2: #b84a1e;
  --cg-brass: #b38433;
  --cg-ok: #1f7347;
  --cg-bad: #8d3225;
  position: relative;
  overflow: clip;
  padding: 0.4rem;
  border: 1px solid #e0bf9c;
  border-radius: 22px;
  background:
    radial-gradient(140% 120% at 100% 0%, rgba(255, 237, 219, 0.92) 0%, rgba(255, 237, 219, 0) 60%),
    linear-gradient(155deg, var(--cg-wood-1) 0%, var(--cg-wood-2) 48%, var(--cg-wood-3) 100%);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.75), 0 18px 45px rgba(67, 33, 15, 0.16);
  color: var(--cg-ink);
  font-family: "DM Sans", "Segoe UI", sans-serif;
}

.cobbler-game::before,
.cobbler-game::after {
  content: "";
  position: absolute;
  pointer-events: none;
}

.cobbler-game::before {
  inset: 0;
  background-image: repeating-linear-gradient(
    -10deg,
    rgba(120, 72, 42, 0.035) 0,
    rgba(120, 72, 42, 0.035) 2px,
    transparent 2px,
    transparent 14px
  );
  opacity: 0.5;
}

.cobbler-game::after {
  inset: 0 auto auto 0;
  width: 260px;
  height: 260px;
  background: radial-gradient(circle at 30% 35%, rgba(255, 255, 255, 0.55), rgba(255, 255, 255, 0));
}

.cobbler-game > * {
  position: relative;
  z-index: 1;
}

.cobbler-game .btn {
  border-radius: 12px;
  min-height: 46px;
  font-family: "DM Sans", "Segoe UI", sans-serif;
  font-weight: 700;
  letter-spacing: 0.01em;
  transition: transform 0.16s ease, box-shadow 0.16s ease, background-color 0.16s ease;
}

.cobbler-game .btn:focus-visible {
  outline: 3px solid rgba(184, 74, 30, 0.28);
  outline-offset: 2px;
}

.cobbler-game .btn:hover:not([disabled]) {
  transform: translateY(-1px);
}

.cobbler-game .btn-primary {
  border: 1px solid #7d2419;
  color: #fff7f0;
  background: linear-gradient(180deg, #b24528, #8b2c1f);
  box-shadow: 0 6px 14px rgba(120, 40, 18, 0.24);
}

.cobbler-game .btn-primary:hover:not([disabled]) {
  box-shadow: 0 9px 16px rgba(120, 40, 18, 0.3);
}

.cobbler-game .btn-outline {
  border: 1px solid #b88d6a;
  color: #5f3d31;
  background: #fffbf7;
}

.cg-topbar {
  border: 1px solid #d7b28d;
  border-radius: 16px;
  background:
    linear-gradient(180deg, rgba(255, 249, 243, 0.93), rgba(255, 239, 226, 0.88));
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.72), 0 10px 24px rgba(89, 40, 19, 0.13);
}

.cg-intro {
  color: #4f392f;
  font-size: 0.96rem;
}

.cg-lang-toggle {
  border-width: 1px;
  border-style: solid;
  border-color: #b67f65;
  color: #61271d;
  background: #fff8f4;
}

.cg-panel {
  border: 1px solid #dcb999;
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(255, 251, 247, 0.94), rgba(255, 243, 233, 0.89));
  box-shadow: 0 12px 30px rgba(90, 43, 20, 0.12);
}

.cg-order {
  background: linear-gradient(180deg, rgba(255, 250, 244, 0.95), rgba(250, 235, 221, 0.92));
}

.cg-workshop {
  background: linear-gradient(180deg, rgba(255, 252, 248, 0.96), rgba(248, 234, 220, 0.92));
}

.cg-tools {
  background: linear-gradient(180deg, rgba(255, 250, 245, 0.95), rgba(250, 236, 223, 0.92));
}

.cg-log {
  background: linear-gradient(180deg, rgba(255, 252, 248, 0.94), rgba(246, 230, 214, 0.88));
}

.cg-panel h2 {
  margin-top: 0;
  font-family: "Bree Serif", Georgia, serif;
  font-size: 1.28rem;
  letter-spacing: 0.01em;
  color: #532f22;
}

.cg-panel h3 {
  font-family: "DM Sans", "Segoe UI", sans-serif;
  color: #64372b;
  font-weight: 800;
}

.cg-stage-name {
  border-color: rgba(139, 44, 31, 0.42);
  background: linear-gradient(180deg, #fff0e3, #ffd9bf);
  color: #6f271c;
  box-shadow: 0 5px 13px rgba(125, 35, 20, 0.2);
}

.cg-stage-desc {
  font-size: 0.95rem;
  color: #4d382f;
}

.cg-issues,
.cg-steps {
  list-style: none;
  padding-left: 0;
}

.cg-issue-item {
  border: 1px solid #e0bda0;
  border-radius: 12px;
  background: linear-gradient(180deg, #fff8f2, #ffefe3);
  padding: 0.52rem 0.58rem;
}

.cg-issue-item strong {
  display: inline-block;
  color: #4f281f;
  font-size: 0.96rem;
}

.cg-issue-solution {
  color: #5f4a40;
}

.cg-steps li {
  border: 1px solid #e1bea0;
  border-radius: 11px;
  background: #fff7f0;
  padding: 0.46rem 0.6rem;
}

.cg-steps li.is-active {
  border-color: #b6684d;
  background: linear-gradient(180deg, #ffeedf, #ffdfc9);
  box-shadow: 0 6px 14px rgba(168, 83, 48, 0.18);
}

.cg-steps li.is-done {
  border-color: #7eaf91;
  background: linear-gradient(180deg, #f1fbf4, #e4f7ea);
}

.cg-diagnosis-card,
.cg-repair-plan,
.cg-mini {
  border-color: #ddb792;
  background: linear-gradient(180deg, #fff9f4, #ffeee1);
}

.cg-repair-feedback {
  border-color: #dcb8a2;
  background: #fff8f3;
}

.cg-mini-wrap {
  gap: 0.8rem;
}

.cg-mini {
  box-shadow: 0 8px 20px rgba(96, 44, 22, 0.12);
  transform-origin: center top;
}

.cg-mini:not([hidden]) {
  animation: cgMiniPop 240ms ease;
}

@keyframes cgMiniPop {
  from {
    transform: translateY(8px) scale(0.985);
    opacity: 0;
  }
  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.cg-track,
.cg-fill-track {
  border-color: #bd8a6c;
  background: linear-gradient(180deg, #fffaf6, #ffe8d5);
}

.cg-zone {
  background: linear-gradient(180deg, #96db94, #4a9c49);
}

.cg-cursor {
  background: linear-gradient(180deg, #b84a1e, #7f2416);
  box-shadow: 0 4px 11px rgba(112, 38, 20, 0.28);
}

.cg-fill {
  background: linear-gradient(90deg, #df7042, #a4331a);
}

.cg-mini-action {
  border: 1px solid #b88064;
  color: #592b21;
  background: linear-gradient(180deg, #fffdfa, #ffece0);
}

.cg-shoe-scene {
  width: min(450px, 100%);
  border-color: #cc9f7f;
  border-radius: 14px;
  background: linear-gradient(165deg, #fff4ea, #ffeadb);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.66), 0 12px 26px rgba(96, 44, 22, 0.16);
}

.cg-tools-grid {
  margin-bottom: 0.9rem;
}

.cg-tool-btn {
  justify-content: center;
  border-color: #985a41;
  color: #fff8f3;
  background: linear-gradient(180deg, #aa4428, #832719);
  box-shadow: 0 8px 18px rgba(125, 39, 25, 0.24);
}

.cg-stats {
  border-color: #ddb895;
  border-radius: 14px;
  background: linear-gradient(180deg, #fff8f2, #ffede0);
  display: flex;
  align-items: stretch;
  flex-wrap: nowrap;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  gap: 0.42rem;
}

.cg-stats p {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.7rem;
  flex: 0 0 185px;
  margin: 0;
  border: 1px solid #e7c8ac;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.66);
  padding: 0.4rem 0.52rem;
  color: #573a2f;
  font-size: 0.9rem;
}

.cg-stats p strong {
  font-size: 0.97rem;
  color: #3e291f;
}

.cg-stats p:nth-child(1) strong,
.cg-stats p:nth-child(2) strong,
.cg-stats p:nth-child(3) strong,
.cg-stats p:nth-child(4) strong {
  color: #742a1f;
  font-weight: 800;
}

.cg-stars {
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 0 0 150px;
  border: 1px solid #e7c8ac;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.66);
  padding: 0.4rem 0.52rem;
  text-align: center;
  color: var(--cg-brass);
  font-size: 1.2rem;
  text-shadow: 0 1px 0 rgba(88, 54, 10, 0.18);
}

.cg-shortcuts {
  font-size: 0.82rem;
  color: #715246;
}

.cg-log [data-log-list] {
  border: 1px solid #d8b290;
  border-radius: 12px;
  background: rgba(255, 247, 239, 0.78);
  padding: 0.55rem 0.78rem 0.55rem 1.3rem;
}

.cg-log [data-log-list] li {
  color: #4f382f;
}

.cg-gallery figure {
  border-color: #d6ae89;
  background: linear-gradient(180deg, #fff9f4, #ffeedd);
  box-shadow: 0 8px 18px rgba(100, 45, 22, 0.1);
}

.cg-gallery img {
  aspect-ratio: 16 / 10;
  object-fit: cover;
}

.cg-popup-overlay {
  backdrop-filter: blur(4px);
}

.cg-popup {
  border-color: #d4a983;
  border-radius: 18px;
  background: linear-gradient(180deg, #fff9f3, #ffe8d7);
}

.cg-week-metrics p strong {
  color: #502d22;
}

.cg-upgrade-buy {
  border: 1px solid #986046;
  color: #fff8f3;
  background: linear-gradient(180deg, #ad482b, #842919);
}

.cg-upgrade-status.is-owned {
  color: var(--cg-ok);
}

.cg-upgrade-status.is-blocked {
  color: var(--cg-bad);
}

.cobbler-game[data-mini-active="true"] .cg-workshop > :not(.cg-mini-wrap):not(.cg-stage-name):not(.cg-stage-desc) {
  opacity: 0.45;
  filter: saturate(0.8);
  transition: opacity 0.2s ease;
}

.cobbler-game[data-mini-active="true"] .cg-mini-wrap {
  position: relative;
  z-index: 3;
}

.cobbler-game[data-mini-active="true"] .cg-mini:not([hidden]) {
  border-color: #bb6a4c;
  box-shadow: 0 18px 30px rgba(122, 43, 24, 0.24);
}

@media (max-width: 560px) {
  .cobbler-game {
    border-radius: 16px;
    padding: 0.3rem;
  }

  .cg-panel {
    border-radius: 14px;
    padding: 0.84rem;
  }

  .cg-topbar {
    grid-template-columns: 1fr;
  }

  .cg-topbar-actions {
    flex-wrap: wrap;
    justify-content: flex-end;
    row-gap: 0.35rem;
  }

  .cg-exit-link {
    min-width: 0;
  }
}

@media (min-width: 740px) {
  .cg-layout {
    grid-template-columns: 0.95fr 1.2fr;
  }

  .cg-tools {
    grid-column: 1 / -1;
  }

  .cg-topbar-order-grid {
    grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr);
    column-gap: 0.62rem;
    align-items: start;
  }

  .cg-order-meta {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (min-width: 1020px) {
  .cg-layout {
    grid-template-columns: 0.86fr 1.55fr 1.02fr;
  }

  .cg-tools {
    grid-column: auto;
  }
}

@media (min-width: 1240px) {
  .cg-topbar .cg-stats {
    grid-auto-flow: row;
    grid-template-columns: repeat(6, minmax(0, 1fr));
    overflow-x: visible;
    padding-bottom: 0;
  }
}

/* Layout and visual cleanup pass */
.cobbler-game {
  --cg-sticky-offset: 0.55rem;
  max-width: 1380px;
  margin: 0 auto;
  padding: 0.45rem clamp(0.55rem, 1.55vw, 1.2rem) 1.35rem;
  gap: 0.78rem;
}

.cobbler-game .cg-topbar {
  grid-template-columns: minmax(0, 1fr);
  grid-template-areas:
    "lang"
    "stats";
  row-gap: 0.45rem;
  position: sticky;
  top: var(--cg-sticky-offset);
  z-index: 30;
  border-radius: 16px;
  border: 1px solid rgba(97, 17, 17, 0.72);
  box-shadow:
    0 16px 30px rgba(57, 9, 9, 0.34),
    inset 0 1px 0 rgba(255, 255, 255, 0.26);
  backdrop-filter: blur(10px);
  background:
    linear-gradient(180deg, rgba(160, 33, 33, 0.96), rgba(123, 20, 20, 0.95));
}

.cobbler-game .cg-topbar-actions {
  width: 100%;
  justify-content: flex-start;
  gap: 0.34rem;
  flex-wrap: nowrap;
  overflow-x: auto;
  scrollbar-width: thin;
  padding-bottom: 0.08rem;
}

.cobbler-game .cg-topbar-actions .btn,
.cobbler-game .cg-topbar-actions .cg-exit-link {
  flex: 0 0 auto;
  min-height: 34px;
  padding: 0.3rem 0.52rem;
  font-size: 0.76rem;
  line-height: 1.08;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.45);
  background: rgba(255, 255, 255, 0.16);
  color: #fff8f2;
}

.cobbler-game .cg-topbar-actions .btn:hover:not([disabled]),
.cobbler-game .cg-topbar-actions .cg-exit-link:hover {
  background: rgba(255, 255, 255, 0.24);
}

.cobbler-game .cg-topbar-actions .cg-exit-link {
  min-width: 114px;
  font-weight: 800;
}

.cobbler-game .cg-topbar-actions .cg-head-main-action {
  border-color: rgba(255, 230, 170, 0.85);
  background: linear-gradient(180deg, rgba(255, 208, 116, 0.95), rgba(230, 138, 41, 0.95));
  color: #4b1909;
  font-weight: 800;
}

.cobbler-game .cg-topbar-actions .cg-head-main-action:hover:not([disabled]) {
  background: linear-gradient(180deg, rgba(255, 222, 148, 0.98), rgba(240, 153, 59, 0.98));
}

.cobbler-game .cg-topbar-actions .cg-head-new-order {
  border-color: rgba(255, 236, 204, 0.85);
  background: linear-gradient(180deg, rgba(255, 171, 108, 0.95), rgba(198, 82, 32, 0.95));
  color: #fff8f1;
  font-weight: 800;
}

.cobbler-game .cg-log .cg-inventory {
  margin-top: 0;
  margin-bottom: 0.62rem;
}

.cobbler-game .cg-log .cg-actions {
  margin-top: 0;
  margin-bottom: 0.6rem;
}

.cobbler-game .cg-exit-link,
.cobbler-game .cg-lang-toggle {
  min-height: 34px;
}

.cobbler-game .cg-topbar .cg-stats {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: minmax(154px, 1fr);
  align-items: stretch;
  overflow-x: auto;
  overscroll-behavior-x: contain;
  scrollbar-gutter: stable both-edges;
  gap: 0.36rem;
  padding-bottom: 0.12rem;
}

.cobbler-game .cg-topbar .cg-stats p,
.cobbler-game .cg-topbar .cg-stars {
  min-height: 48px;
}

.cobbler-game .cg-topbar .cg-stats p {
  display: grid;
  align-content: center;
  justify-items: start;
  row-gap: 0.12rem;
  flex: 0 0 166px;
  margin: 0;
  padding: 0.38rem 0.46rem;
  border: 1px solid rgba(255, 219, 173, 0.45);
  background: linear-gradient(180deg, rgba(88, 16, 16, 0.52), rgba(67, 12, 12, 0.45));
  color: #ffe9d2;
  text-shadow: 0 1px 0 rgba(43, 7, 7, 0.35);
  font-size: 0;
  line-height: 1;
}

.cobbler-game .cg-topbar .cg-stats p span {
  display: inline-block;
  max-width: 100%;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  font-size: 0.66rem;
  line-height: 1.14;
  color: #ffd9b9;
  opacity: 1;
}

.cobbler-game .cg-topbar .cg-stats p strong {
  font-size: 0.98rem;
  line-height: 1.12;
  color: #fff7ea;
  font-weight: 800;
}

.cobbler-game .cg-topbar .cg-stars {
  flex: 0 0 128px;
  border: 1px solid rgba(255, 219, 173, 0.45);
  background: linear-gradient(180deg, rgba(88, 16, 16, 0.52), rgba(67, 12, 12, 0.45));
  color: #ffd26a;
  font-size: 1.08rem;
  text-shadow: 0 1px 0 rgba(43, 7, 7, 0.45);
}

.cobbler-game .cg-topbar-order {
  margin-top: 0;
  border-radius: 14px;
  padding: 0.58rem 0.7rem;
}

.cobbler-game .cg-topbar-order-grid {
  grid-template-columns: 1fr;
  gap: 0.52rem;
}

.cobbler-game .cg-order-meta {
  gap: 0.24rem;
}

.cobbler-game .cg-order-meta-item {
  padding: 0.26rem 0.4rem;
}

.cobbler-game .cg-topbar-order h2 {
  font-size: 1rem;
}

.cobbler-game .cg-topbar-order h3 {
  font-size: 0.88rem;
}

.cobbler-game .cg-topbar-order .cg-issues li,
.cobbler-game .cg-topbar-order .cg-steps li {
  font-size: 0.8rem;
}

.cobbler-game .cg-layout {
  grid-template-areas:
    "order"
    "workshop";
  align-items: start;
  gap: 0.82rem;
}

.cobbler-game .cg-order,
.cobbler-game .cg-workshop,
.cobbler-game .cg-tools {
  min-width: 0;
}

.cobbler-game .cg-order {
  grid-area: order;
}

.cobbler-game .cg-workshop {
  grid-area: workshop;
}

.cobbler-game .cg-panel {
  border-radius: 15px;
  padding: 0.86rem;
}

.cobbler-game .cg-panel h2 {
  font-size: 1.14rem;
  margin-bottom: 0.6rem;
}

.cobbler-game .cg-workshop {
  gap: 0.62rem;
}

.cobbler-game .cg-mini-wrap {
  gap: 0.62rem;
}

.cobbler-game .cg-mini {
  padding: 0.66rem;
}

.cobbler-game .cg-shoe-scene {
  width: min(520px, 100%);
}

@media (max-width: 640px) {
  .cobbler-game {
    --cg-sticky-offset: 0.35rem;
    padding-left: 0.42rem;
    padding-right: 0.42rem;
  }

  .cobbler-game .cg-topbar {
    padding: 0.7rem 0.76rem;
  }

  .cobbler-game .cg-topbar-actions {
    flex-wrap: nowrap;
    justify-content: flex-start;
  }

  .cobbler-game .cg-topbar-actions .btn,
  .cobbler-game .cg-topbar-actions .cg-exit-link {
    font-size: 0.7rem;
    padding: 0.26rem 0.42rem;
  }

  .cobbler-game .cg-topbar .cg-stats {
    grid-auto-columns: minmax(138px, 1fr);
  }
}

@media (min-width: 780px) {
  .cobbler-game .cg-topbar-order-grid {
    grid-template-columns: minmax(0, 0.95fr) minmax(0, 1.05fr);
    column-gap: 0.7rem;
  }

  .cobbler-game .cg-order-meta {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .cobbler-game .cg-layout {
    grid-template-columns: minmax(480px, 1.38fr) minmax(300px, 0.92fr);
    grid-template-areas: "workshop order";
  }
}

@media (min-width: 1120px) {
  .cobbler-game .cg-layout {
    grid-template-columns: minmax(620px, 1.56fr) minmax(340px, 0.9fr);
    grid-template-areas: "workshop order";
  }
}

/* Stats row stability hotfix */
.cobbler-game .cg-topbar .cg-stats {
  display: flex !important;
  flex-wrap: nowrap !important;
  align-items: stretch;
  overflow-x: auto !important;
  overscroll-behavior-x: contain;
  gap: 0.4rem !important;
  padding: 0.12rem 0.04rem 0.14rem !important;
}

.cobbler-game .cg-topbar .cg-stats p {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start;
  gap: 0.14rem;
  flex: 0 0 172px !important;
  min-width: 172px;
  max-width: 172px;
  margin: 0;
}

.cobbler-game .cg-topbar .cg-stars {
  flex: 0 0 132px !important;
  min-width: 132px;
  max-width: 132px;
}

@media (max-width: 640px) {
  .cobbler-game .cg-topbar .cg-stats p {
    flex: 0 0 154px !important;
    min-width: 154px;
    max-width: 154px;
  }

  .cobbler-game .cg-topbar .cg-stars {
    flex: 0 0 120px !important;
    min-width: 120px;
    max-width: 120px;
  }
}

/* Commande compaction pass */
.cobbler-game .cg-topbar-order {
  padding: 0.44rem 0.56rem;
}

.cobbler-game .cg-topbar-order-head {
  margin-bottom: 0.14rem;
}

.cobbler-game .cg-topbar-order h2 {
  margin-bottom: 0.14rem;
  font-size: 0.92rem;
  line-height: 1.08;
}

.cobbler-game .cg-topbar-order h3 {
  margin-bottom: 0.12rem;
  font-size: 0.8rem;
  line-height: 1.08;
}

.cobbler-game .cg-order-meta {
  gap: 0.16rem;
}

.cobbler-game .cg-order-meta-item {
  padding: 0.2rem 0.3rem;
}

.cobbler-game .cg-order-meta-item span {
  font-size: 0.61rem;
}

.cobbler-game .cg-order-meta-item strong {
  font-size: 0.76rem;
}

.cobbler-game .cg-topbar-order .cg-issues,
.cobbler-game .cg-topbar-order .cg-steps {
  margin-top: 0.06rem;
  gap: 0.14rem;
}

.cobbler-game .cg-topbar-order .cg-issue-item {
  padding: 0.3rem 0.42rem;
  border-radius: 10px;
}

.cobbler-game .cg-topbar-order .cg-issue-item strong {
  font-size: 0.82rem;
  line-height: 1.1;
}

.cobbler-game .cg-topbar-order .cg-issue-status {
  font-size: 0.68rem;
}

.cobbler-game .cg-topbar-order .cg-issue-solution {
  margin-top: 0.03rem;
  font-size: 0.73rem;
  line-height: 1.14;
}

.cobbler-game .cg-topbar-order .cg-steps li {
  padding: 0.24rem 0.4rem;
  font-size: 0.77rem;
  line-height: 1.1;
}

@media (min-width: 980px) {
  .cobbler-game .cg-topbar-order-grid {
    grid-template-columns: minmax(320px, 0.9fr) minmax(0, 1.1fr);
    column-gap: 0.5rem;
    align-items: start;
  }

  .cobbler-game .cg-topbar-order-details {
    display: grid;
    grid-template-columns: minmax(0, 1.25fr) minmax(0, 1fr);
    column-gap: 0.5rem;
    row-gap: 0.06rem;
    align-content: start;
  }

  .cobbler-game .cg-topbar-order-details h3 {
    margin: 0;
  }

  .cobbler-game .cg-topbar-order-details h3:nth-of-type(1) {
    grid-column: 1;
  }

  .cobbler-game .cg-topbar-order-details h3:nth-of-type(2) {
    grid-column: 2;
  }

  .cobbler-game .cg-topbar-order-details .cg-issues {
    grid-column: 1;
  }

  .cobbler-game .cg-topbar-order-details .cg-steps {
    grid-column: 2;
  }
}

.cobbler-game .cg-order .cg-order-scene {
  margin: 0.5rem 0 0 auto;
  width: min(300px, 100%);
}

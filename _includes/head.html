<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#0f172a">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700;800&family=Oswald:wght@500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
<link rel="alternate" type="application/atom+xml" title="{{ site.title }}" href="{{ '/feed.xml' | relative_url }}">
{% if page.keywords %}
<meta name="keywords" content="{{ page.keywords | join: ', ' | escape }}">
{% endif %}

{% seo %}

{%- assign abs_url = page.url | absolute_url -%}
{%- assign current_lang = page.lang | default: site.lang | default: 'fr' -%}
{%- assign author_name = site.author.name | default: site.author | default: site.title -%}
{%- assign author_title = site.author_title | default: 'Web Creator' -%}
{%- assign author_country = site.author_country | default: 'CA' -%}
{%- assign author_locality = site.author_locality | default: 'Gatineau' -%}

{% assign page_ref = page.lang_ref | default: nil %}
{% assign lang_peer = nil %}
{% if page_ref %}
  {% assign page_matches = site.pages | where: "lang_ref", page_ref %}
  {% assign post_matches = site.posts | where: "lang_ref", page_ref %}
  {% assign candidates = page_matches | concat: post_matches %}
  {% for item in candidates %}
    {% if item.lang != current_lang %}
      {% assign lang_peer = item %}
      {% break %}
    {% endif %}
  {% endfor %}
{% endif %}

{% if lang_peer %}
  <link rel="alternate" hreflang="{{ current_lang }}" href="{{ abs_url }}">
  <link rel="alternate" hreflang="{{ lang_peer.lang }}" href="{{ lang_peer.url | absolute_url }}">
{% endif %}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "{{ author_name | escape }}",
  "url": "{{ site.url | append: site.baseurl }}",
  "jobTitle": "{{ author_title | escape }}",
  "address": {
    "@type": "PostalAddress",
    "addressCountry": "{{ author_country }}",
    "addressLocality": "{{ author_locality | escape }}"
  }
}
</script>

{% if page.lang_ref == "home" %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ site.title | escape }}",
  "url": "{{ site.url | append: site.baseurl }}",
  "inLanguage": "{{ current_lang }}",
  "publisher": {
    "@type": "Person",
    "name": "{{ author_name | escape }}"
  }
}
</script>
{% endif %}

{% if page.layout == "post" %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ page.title | escape }}",
  "description": "{{ page.excerpt | strip_html | strip_newlines | truncate: 200 | escape }}",
  "inLanguage": "{{ current_lang }}",
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  "dateModified": "{{ page.last_modified_at | default: page.date | date_to_xmlschema }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ abs_url }}"
  },
  "author": {
    "@type": "Person",
    "name": "{{ author_name | escape }}"
  },
  "publisher": {
    "@type": "Person",
    "name": "{{ author_name | escape }}"
  }
}
</script>
{% endif %}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "{{ page.title | default: site.title | escape }}",
  "url": "{{ abs_url }}",
  "inLanguage": "{{ current_lang }}"
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "{% if current_lang == 'en' %}Home{% else %}Accueil{% endif %}",
      "item": "{{ site.url | append: site.baseurl }}{% if current_lang == 'en' %}/en/{% else %}/{% endif %}"
    }
    {% if page.url != '/' and page.url != '/en/' %}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": "{{ page.title | escape }}",
        "item": "{{ abs_url }}"
      }
    {% endif %}
  ]
}
</script>
